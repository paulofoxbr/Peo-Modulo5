@page "/cursos"
@attribute [Authorize(Roles = "Admin")]
@layout MainLayout

<PageTitle>Cursos</PageTitle>

<MudText Typo="Typo.h1" Class="mb-4" Align="Align.Center">Gestão de Cursos</MudText>
<MudDataGrid T="Curso" Items="_cursosLista">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Lista de Cursos</MudText>
        <MudSpacer />
        <MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" OnClick="AdicionarCurso">
            Adicionar
        </MudButton>
    </ToolBarContent>
    <Columns>
        <HierarchyColumn T="Curso" />
        <PropertyColumn Property="i => i.Titulo" Title="Título" />
        <PropertyColumn Property="i => i.InstrutorNome" Title="Instrutor" />
        <PropertyColumn Property="i => i.Descricao" Title="Descrição do Curso" />
        <PropertyColumn Property="i => i.Preco" Title="Preço" Culture=@_pt Format="C" />
        <TemplateColumn CellClass="d-flex justify-end" Context="i">
            <CellTemplate>
                <MudLink Href="@($"/cursos/{i.Item.Id}/aulas")">Gerenciar aulas</MudLink>
            </CellTemplate>
        </TemplateColumn> 
    </Columns>
    <ChildRowContent>
        <MudPaper Class="p-4" Style="white-space:pre-wrap">
            <MudText Typo="Typo.h6">Conteúdo programático</MudText>
            <MudDivider Class="my-2" />
            @context.Item.ConteudoProgramatico.Conteudo
        </MudPaper>
    </ChildRowContent>
</MudDataGrid>